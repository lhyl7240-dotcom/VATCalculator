<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>מחשבון מע"מ אונליין</title>
  <meta name="description" content="חישוב מע״מ לפי מדינה וסכום – 'לפני מע״מ' או 'כולל מע״מ', שיעור המע״מ והמע״מ עצמו." />
  <style>
    :root{--bg:#0b1020;--card:#121936;--ink:#e9ecf8;--muted:#aab2d6;--accent:#8bd3ff}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif;background:radial-gradient(1200px 800px at 100% -10%,#1a244f 0%,#0b1020 60%);color:var(--ink)}
    a{color:var(--accent);text-decoration:none}
    .container{max-width:960px;margin:0 auto;padding:32px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:clamp(22px,4vw,40px)}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:22px}
    label{display:block;margin-bottom:6px;color:var(--muted);font-weight:600}
    input,select,button{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:#0f1530;color:var(--ink);font-size:16px}
    input:focus,select:focus,button:focus{outline:2px solid var(--accent);outline-offset:2px}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
    .row-3{display:grid;gap:12px}
    @media(min-width:840px){.row-3{grid-template-columns:repeat(3,1fr)}}
    .kpi{background:#0f1530;border:1px solid rgba(255,255,255,.08);padding:14px;border-radius:14px}
    .kpi small{color:var(--muted);display:block;margin-bottom:4px}
    .kpi strong{font-size:20px}
    .actions{display:flex;gap:12px;align-items:center;margin-top:10px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>מחשבון מע"מ אונליין</h1>
      <span style="opacity:.7">גרסה 1.2</span>
    </header>

    <main class="card">
      <div class="grid">
        <div>
          <label for="country">בחר מדינה</label>
          <select id="country">
            <option value="IL" data-rate="0.17" data-cur="₪">ישראל – 17%</option>
            <option value="GB" data-rate="0.20" data-cur="£">בריטניה – 20%</option>
            <option value="FR" data-rate="0.20" data-cur="€">צרפת – 20%</option>
            <option value="DE" data-rate="0.19" data-cur="€">גרמניה – 19%</option>
            <option value="ES" data-rate="0.21" data-cur="€">ספרד – 21%</option>
            <option value="IT" data-rate="0.22" data-cur="€">איטליה – 22%</option>
            <option value="NL" data-rate="0.21" data-cur="€">הולנד – 21%</option>
            <option value="EU" data-rate="0.21" data-cur="€">האיחוד האירופי (כללי) – 21%</option>
            <option value="AU" data-rate="0.10" data-cur="A$">אוסטרליה – 10%</option>
            <option value="CA" data-rate="0.15" data-cur="C$">קנדה – 15%</option>
            <option value="US-NY" data-rate="0.08875" data-cur="$">ארה״ב – ניו יורק 8.875%</option>
            <option value="US-CA" data-rate="0.0725" data-cur="$">ארה״ב – קליפורניה 7.25%</option>
            <option value="US-TX" data-rate="0.0825" data-cur="$">ארה״ב – טקסס 8.25%</option>
          </select>
        </div>
        <div>
          <label for="amount">סכום</label>
          <input id="amount" type="text" inputmode="decimal" placeholder="לדוגמה: 500" />
        </div>
      </div>

      <div class="actions">
        <label style="display:flex;gap:8px;align-items:center">
          <input type="radio" name="mode" value="net"> לפני מע״מ
        </label>
        <label style="display:flex;gap:8px;align-items:center">
          <input type="radio" name="mode" value="gross" checked> כולל מע״מ
        </label>
        <button id="calcBtn" style="max-width:160px">חשב</button>
      </div>

      <div class="row-3" style="margin-top:12px">
        <div class="kpi"><small>שיעור מע״מ</small><strong id="rate">–</strong></div>
        <div class="kpi"><small>לפני מע״מ</small><strong id="net">–</strong></div>
        <div class="kpi"><small>מע״מ</small><strong id="vat">–</strong></div>
      </div>
      <div class="kpi" style="margin-top:12px"><small>כולל מע״מ</small><strong id="gross">–</strong></div>
    </main>
  </div>

  <script>
    function parseAmount(raw){
      if(!raw) return 0;
      const cleaned = String(raw).replace(/\s/g,'').replace(/,/g,'.');
      const num = Number.parseFloat(cleaned);
      return Number.isFinite(num) ? num : 0;
    }
    function formatMoney(v, cur){
      try{ return new Intl.NumberFormat('he-IL',{maximumFractionDigits:2}).format(v) + (cur?' '+cur:''); }
      catch(e){ return v.toFixed(2) + (cur?' '+cur:''); }
    }
    function currentRate(){
      const opt = document.querySelector('#country option:checked');
      return { rate: Number(opt.dataset.rate), cur: opt.dataset.cur || '' };
    }
    function calculate(){
      const amount = parseAmount(document.getElementById('amount').value);
      const {rate, cur} = currentRate();
      const mode = document.querySelector('input[name="mode"]:checked').value;

      let net=0, vat=0, gross=0;
      if(mode === 'net'){ net = amount; vat = net*rate; gross = net + vat; }
      else { gross = amount; net = gross/(1+rate); vat = gross - net; }

      document.getElementById('rate').textContent = (rate*100).toFixed(2) + '%';
      document.getElementById('net').textContent = formatMoney(net, cur);
      document.getElementById('vat').textContent = formatMoney(vat, cur);
      document.getElementById('gross').textContent = formatMoney(gross, cur);
    }
    // אירועים
    document.getElementById('calcBtn').addEventListener('click', calculate);
    document.getElementById('country').addEventListener('change', calculate);
    document.querySelectorAll('input[name="mode"]').forEach(r=>r.addEventListener('change', calculate));
    document.getElementById('amount').addEventListener('input', calculate);
    // חישוב ראשוני
    calculate();
  </script>
</body>
</html>
